<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <title>Thai Shrimp Industry 2026</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            background: #fafafa;
            padding: 20px;
        }

        h2, h3 {
            margin-top: 24px;
        }

        table {
            border-collapse: collapse;
            width: 100%;
            margin-top: 12px;
            background: #fff;
        }

        th, td {
            border: 1px solid #ccc;
            padding: 8px;
            text-align: center;
        }

        th {
            background: #f2f2f2;
        }

        .overview .cards {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(160px, 1fr));
            gap: 12px;
            margin-top: 12px;
        }

        .card {
            background: #ffffff;
            border: 1px solid #ddd;
            border-radius: 8px;
            padding: 12px;
            text-align: center;
        }

        .insight {
            background: #eef7ff;
            padding: 12px 16px;
            border-left: 4px solid #3b82f6;
            margin-top: 20px;
        }
    </style>
</head>

<body>

<h2>ü¶ê Thai Shrimp Industry 2026</h2>

<!-- ===== Market Overview ===== -->
<div class="overview">
    <h3>Market Overview</h3>

    <div class="cards">
        <div class="card">
            <strong>Market</strong><br>
            {{ overview.market }}
        </div>

        <div class="card">
            <strong>Size</strong><br>
            {{ overview.size }}
        </div>

        <div class="card">
            <strong>Avg Price</strong><br>
            {{ overview.avg_price }} ‡∏ö‡∏≤‡∏ó/‡∏Å‡∏Å.
        </div>

        <div class="card">
            <strong>Trend</strong><br>
            {{ overview.trend }}
        </div>
    </div>
</div>
def compare_last_14_days(prices):
    """
    ‡πÄ‡∏õ‡∏£‡∏µ‡∏¢‡∏ö‡πÄ‡∏ó‡∏µ‡∏¢‡∏ö 7 ‡∏ß‡∏±‡∏ô‡∏•‡πà‡∏≤‡∏™‡∏∏‡∏î vs 7 ‡∏ß‡∏±‡∏ô‡∏Å‡πà‡∏≠‡∏ô‡∏´‡∏ô‡πâ‡∏≤
    prices ‡∏ï‡πâ‡∏≠‡∏á‡πÄ‡∏£‡∏µ‡∏¢‡∏á‡∏ï‡∏≤‡∏°‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡πÄ‡∏Å‡πà‡∏≤ ‚Üí ‡πÉ‡∏´‡∏°‡πà
    """
    if len(prices) < 14:
        return {}

    last_7 = prices[-7:]
    prev_7 = prices[-14:-7]

    avg_last_7 = sum(p["price"] for p in last_7) / len(last_7)
    avg_prev_7 = sum(p["price"] for p in prev_7) / len(prev_7)

    diff = avg_last_7 - avg_prev_7
    pct = (diff / avg_prev_7) * 100 if avg_prev_7 != 0 else 0

    trend = "‚Üí"
    if diff > 0:
        trend = "‚Üë"
    elif diff < 0:
        trend = "‚Üì"

    return {
        "avg_last_7": round(avg_last_7, 2),
        "avg_prev_7": round(avg_prev_7, 2),
        "diff": round(diff, 2),
        "pct": round(pct, 1),
        "trend": trend
    }

<!-- ===== Market Insight ===== -->
<div class="insight">
    <h3>Market Insight</h3>
    <ul>
        <li>‡∏£‡∏≤‡∏Ñ‡∏≤‡∏Å‡∏∏‡πâ‡∏á‡πÄ‡∏â‡∏•‡∏µ‡πà‡∏¢‡∏≠‡∏¢‡∏π‡πà‡∏ó‡∏µ‡πà {{ overview.avg_price }} ‡∏ö‡∏≤‡∏ó/‡∏Å‡∏Å.</li>
        <li>‡πÅ‡∏ô‡∏ß‡πÇ‡∏ô‡πâ‡∏°‡∏£‡∏≤‡∏Ñ‡∏≤ {{ overview.trend }} ‡πÄ‡∏°‡∏∑‡πà‡∏≠‡πÄ‡∏ó‡∏µ‡∏¢‡∏ö‡∏ß‡∏±‡∏ô‡∏Å‡πà‡∏≠‡∏ô‡∏´‡∏ô‡πâ‡∏≤</li>
        <li>‡πÉ‡∏ä‡πâ‡∏õ‡∏£‡∏∞‡∏Å‡∏≠‡∏ö‡∏Å‡∏≤‡∏£‡∏ï‡∏±‡∏î‡∏™‡∏¥‡∏ô‡πÉ‡∏à‡∏à‡∏±‡∏î‡∏ã‡∏∑‡πâ‡∏≠‡∏£‡∏∞‡∏¢‡∏∞‡∏™‡∏±‡πâ‡∏ô</li>
    </ul>
</div>

<!-- ===== Price Table ===== -->
<h3>üìä ‡∏£‡∏≤‡∏Ñ‡∏≤‡∏Å‡∏∏‡πâ‡∏á‡∏£‡∏≤‡∏¢‡∏ß‡∏±‡∏ô (Google Sheet)</h3>

<table>
    <thead>
        <tr>
            <th>Date</th>
            <th>Market</th>
            <th>Size</th>
            <th>Price (THB/kg)</th>
        </tr>
    </thead>
    <tbody>
        {% for p in prices %}
        <tr>
            <td>{{ p.date }}</td>
            <td>{{ p.market }}</td>
            <td>{{ p.size }}</td>
            <td>{{ p.price }}</td>
        </tr>
        {% else %}
        <tr>
            <td colspan="4">‡πÑ‡∏°‡πà‡∏û‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•</td>
        </tr>
        {% endfor %}
    </tbody>
</table>
<hr style="margin:40px 0;">

<section class="executive">
  <h2>üß† Executive Market Overview</h2>
  <p style="color:#555;">‡∏™‡∏£‡∏∏‡∏õ‡∏™‡∏ñ‡∏≤‡∏ô‡∏Å‡∏≤‡∏£‡∏ì‡πå‡∏Å‡∏∏‡πâ‡∏á‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏ú‡∏π‡πâ‡∏ö‡∏£‡∏¥‡∏´‡∏≤‡∏£ (1 ‡∏ô‡∏≤‡∏ó‡∏µ‡πÄ‡∏Ç‡πâ‡∏≤‡πÉ‡∏à)</p>

  <div class="cards" style="display:grid;grid-template-columns:repeat(auto-fit,minmax(180px,1fr));gap:16px;margin-top:20px;">
    
    <div class="card">
      <strong>Market</strong><br>
      {{ overview.market }}
    </div>

    <div class="card">
      <strong>Main Size</strong><br>
      {{ overview.size }}
    </div>

    <div class="card">
      <strong>Avg Price</strong><br>
      {{ overview.avg_price }} ‡∏ö‡∏≤‡∏ó/‡∏Å‡∏Å.
    </div>

    <div class="card">
      <strong>Trend</strong><br>
      <span style="font-size:22px;">
        {{ overview.trend }}
      </span>
    </div>
<section class="executive" style="margin-top:40px;">
  <h2>üìÜ 7-Day Comparison</h2>
  <p style="color:#555;">‡πÄ‡∏õ‡∏£‡∏µ‡∏¢‡∏ö‡πÄ‡∏ó‡∏µ‡∏¢‡∏ö‡∏£‡∏≤‡∏Ñ‡∏≤‡πÄ‡∏â‡∏•‡∏µ‡πà‡∏¢ 7 ‡∏ß‡∏±‡∏ô‡∏•‡πà‡∏≤‡∏™‡∏∏‡∏î vs 7 ‡∏ß‡∏±‡∏ô‡∏Å‡πà‡∏≠‡∏ô‡∏´‡∏ô‡πâ‡∏≤</p>

  {% if compare_7d %}
  <div class="cards" style="display:grid;grid-template-columns:repeat(auto-fit,minmax(180px,1fr));gap:16px;margin-top:20px;">
    
    <div class="card">
      <strong>7 ‡∏ß‡∏±‡∏ô‡∏•‡πà‡∏≤‡∏™‡∏∏‡∏î</strong><br>
      {{ compare_7d.avg_last_7 }} ‡∏ö‡∏≤‡∏ó/‡∏Å‡∏Å.
    </div>

    <div class="card">
      <strong>7 ‡∏ß‡∏±‡∏ô‡∏Å‡πà‡∏≠‡∏ô‡∏´‡∏ô‡πâ‡∏≤</strong><br>
      {{ compare_7d.avg_prev_7 }} ‡∏ö‡∏≤‡∏ó/‡∏Å‡∏Å.
    </div>

    <div class="card">
      <strong>‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡πÅ‡∏õ‡∏•‡∏á</strong><br>
      {{ compare_7d.diff }} ‡∏ö‡∏≤‡∏ó
    </div>

    <div class="card">
      <strong>Trend</strong><br>
      {{ compare_7d.trend }} ({{ compare_7d.pct }}%)
    </div>

  </div>

  <div class="insight" style="margin-top:20px;">
    <h3>üìå Executive Interpretation</h3>
    <ul>
      <li>‡∏£‡∏≤‡∏Ñ‡∏≤‡πÄ‡∏â‡∏•‡∏µ‡πà‡∏¢ 7 ‡∏ß‡∏±‡∏ô‡∏•‡πà‡∏≤‡∏™‡∏∏‡∏î {{ compare_7d.trend }}
          {{ compare_7d.pct }}%</li>
      {% if compare_7d.trend == "‚Üë" %}
        <li>‡∏ï‡πâ‡∏ô‡∏ó‡∏∏‡∏ô‡∏°‡∏µ‡πÅ‡∏ô‡∏ß‡πÇ‡∏ô‡πâ‡∏°‡πÄ‡∏û‡∏¥‡πà‡∏° ‚Äî ‡∏Ñ‡∏ß‡∏£‡∏£‡∏∞‡∏ß‡∏±‡∏á‡∏Å‡∏≤‡∏£‡∏ã‡∏∑‡πâ‡∏≠‡∏™‡∏∞‡∏™‡∏°</li>
      {% elif compare_7d.trend == "‚Üì" %}
        <li>‡∏£‡∏≤‡∏Ñ‡∏≤‡∏ú‡πà‡∏≠‡∏ô‡∏Ñ‡∏•‡∏≤‡∏¢ ‚Äî ‡πÄ‡∏õ‡πá‡∏ô‡∏à‡∏±‡∏á‡∏´‡∏ß‡∏∞‡∏û‡∏¥‡∏à‡∏≤‡∏£‡∏ì‡∏≤‡πÄ‡∏Ç‡πâ‡∏≤‡∏ã‡∏∑‡πâ‡∏≠</li>
      {% else %}
        <li>‡∏£‡∏≤‡∏Ñ‡∏≤‡πÅ‡∏Å‡∏ß‡πà‡∏á‡∏ï‡∏±‡∏ß ‚Äî ‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥‡∏ã‡∏∑‡πâ‡∏≠‡πÅ‡∏ö‡∏ö‡∏Å‡∏£‡∏∞‡∏à‡∏≤‡∏¢‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏™‡∏µ‡πà‡∏¢‡∏á</li>
      {% endif %}
    </ul>
  </div>
  {% else %}
    <p>‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏Ñ‡∏£‡∏ö 14 ‡∏ß‡∏±‡∏ô</p>
  {% endif %}
</section>

  </div>

  <div class="insight" style="margin-top:30px;background:#f9fafb;padding:16px;border-left:5px solid #0f766e;">
    <h3>üìå Executive Insight</h3>
    <ul>
      <li>‡∏£‡∏≤‡∏Ñ‡∏≤‡πÄ‡∏â‡∏•‡∏µ‡πà‡∏¢‡∏≠‡∏¢‡∏π‡πà‡∏ó‡∏µ‡πà <strong>{{ overview.avg_price }}</strong> ‡∏ö‡∏≤‡∏ó/‡∏Å‡∏Å.</li>
      <li>‡πÅ‡∏ô‡∏ß‡πÇ‡∏ô‡πâ‡∏°‡∏£‡∏≤‡∏Ñ‡∏≤ <strong>{{ overview.trend }}</strong> ‡πÄ‡∏°‡∏∑‡πà‡∏≠‡πÄ‡∏ó‡∏µ‡∏¢‡∏ö‡∏á‡∏ß‡∏î‡∏Å‡πà‡∏≠‡∏ô</li>
      <li>‡∏ï‡∏•‡∏≤‡∏î‡∏´‡∏•‡∏±‡∏Å‡∏¢‡∏±‡∏á‡πÄ‡∏õ‡πá‡∏ô <strong>{{ overview.market }}</strong></li>
      <li>‡πÄ‡∏´‡∏°‡∏≤‡∏∞‡πÉ‡∏ä‡πâ‡∏õ‡∏£‡∏∞‡∏Å‡∏≠‡∏ö‡∏Å‡∏≤‡∏£‡∏ï‡∏±‡∏î‡∏™‡∏¥‡∏ô‡πÉ‡∏à‡∏à‡∏±‡∏î‡∏ã‡∏∑‡πâ‡∏≠‡∏£‡∏∞‡∏¢‡∏∞‡∏™‡∏±‡πâ‡∏ô</li>
    </ul>
  </div>

  <div class="decision" style="margin-top:20px;padding:16px;background:#ecfeff;">
    <h3>üö¶ Decision Signal</h3>
    {% if overview.trend == "‚Üë" %}
      <p style="color:#dc2626;"><strong>üî¥ ‡∏£‡∏≤‡∏Ñ‡∏≤‡πÄ‡∏£‡πà‡∏á‡∏ï‡∏±‡∏ß ‚Äî ‡∏£‡∏∞‡∏ß‡∏±‡∏á‡∏Å‡∏≤‡∏£‡∏ã‡∏∑‡πâ‡∏≠‡∏™‡∏∞‡∏™‡∏°</strong></p>
    {% elif overview.trend == "‚Üì" %}
      <p style="color:#16a34a;"><strong>üü¢ ‡∏£‡∏≤‡∏Ñ‡∏≤‡∏≠‡πà‡∏≠‡∏ô‡∏ï‡∏±‡∏ß ‚Äî ‡∏°‡∏µ‡πÇ‡∏≠‡∏Å‡∏≤‡∏™‡πÄ‡∏Ç‡πâ‡∏≤‡∏ã‡∏∑‡πâ‡∏≠</strong></p>
    {% else %}
      <p style="color:#ca8a04;"><strong>üü° ‡∏£‡∏≤‡∏Ñ‡∏≤‡πÅ‡∏Å‡∏ß‡πà‡∏á‡∏ï‡∏±‡∏ß ‚Äî ‡∏ã‡∏∑‡πâ‡∏≠‡πÅ‡∏ö‡∏ö‡∏£‡∏∞‡∏°‡∏±‡∏î‡∏£‡∏∞‡∏ß‡∏±‡∏á</strong></p>
    {% endif %}
  </div>

</section>

</body>
</html>

